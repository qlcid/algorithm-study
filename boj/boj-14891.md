## ë¬¸ì œ
* ë°±ì¤€ 14891ë²ˆ: í†±ë‹ˆë°”í€´
* https://www.acmicpc.net/problem/14891

## ì½”ë“œ
~~~cpp
/**
 * ë°±ì¤€ 14891ë²ˆ
 * @see https://www.acmicpc.net/problem/14891
 * @author ê¹€ì˜ˆìŠ¬
*/

#include <bits/stdc++.h>
using namespace std;

int gear[4][8];

void rotate(int n, int cw);

int main(void) {
	ios::sync_with_stdio(0);
	cin.tie(0);

    // 12ì‹œ ë°©í–¥ë¶€í„°(n: 0, s: 1)(ì‹œê³„: 1, ë°˜ì‹œê³„: -1)
    // 12ì‹œ ë°©í–¥ ê¸°ì¤€ N - 0 / S - 1, 2, 4, 8ì 
    for (int i = 0; i < 4; i++) {
        string tmp;
        cin >> tmp;

        for (int j = 0; j < tmp.length(); j++)
            gear[i][j] = tmp[j] - '0';
    }

    int k, sum = 0;
    cin >> k;

    // í†±ë‹ˆë°”í€´ íšŒì „
    while (k--) {
        int n, cw;
        cin >> n >> cw;

        switch (n) {
            case 1:         // ì²« ë²ˆì§¸ í†±ë‹ˆë°”í€´ì¼ ê²½ìš°
                if (gear[n - 1][2] != gear[n][6]) {                 // ì²« ë²ˆì§¸ != ë‘ ë²ˆì§¸
                    if (gear[n][2] != gear[n + 1][6]) {             // ë‘ ë²ˆì§¸ != ì„¸ ë²ˆì§¸
                        if (gear[n + 1][2] != gear[n + 2][6]) {     // ì„¸ ë²ˆì§¸ != ë„¤ ë²ˆì§¸
                            rotate(n + 2, -cw);
                            rotate(n + 1, cw);
                            rotate(n, -cw);
                            rotate(n - 1, cw);
                        } else {
                            rotate(n + 1, cw);
                            rotate(n, -cw);
                            rotate(n - 1, cw);
                        }
                    } else {
                        rotate(n, -cw);
                        rotate(n - 1, cw);
                    }
                } else {
                    rotate(n - 1, cw);
                }
                break;

            case 2:         // ë‘ ë²ˆì§¸ í†±ë‹ˆë°”í€´ì¼ ê²½ìš°
                if (gear[n - 1][6] != gear[n - 2][2]) {             // ë‘ ë²ˆì§¸ != ì²« ë²ˆì§¸
                    rotate(n - 2, -cw);
                }
                if (gear[n - 1][2] != gear[n][6]) {                 // ë‘ ë²ˆì§¸ != ì„¸ ë²ˆì§¸
                    if (gear[n][2] != gear[n + 1][6]) {             // ì„¸ ë²ˆì§¸ != ë„¤ ë²ˆì§¸
                        rotate(n + 1, cw);
                        rotate(n, -cw);
                        rotate(n - 1, cw);
                    } else {
                        rotate(n, -cw);
                        rotate(n - 1, cw);
                    }
                } else {
                    rotate(n - 1, cw);
                }
                break;

            case 3:         // ì„¸ ë²ˆì§¸ í†±ë‹ˆë°”í€´ì¼ ê²½ìš°
                if (gear[n - 1][6] != gear[n - 2][2]) {
                    if (gear[n - 2][6] != gear[n - 3][2]) {
                        rotate(n - 3, cw);
                        rotate(n - 2, -cw);
                        rotate(n - 1, cw);
                    } else {
                        rotate(n - 2, -cw);
                        rotate(n - 1, cw);
                    }
                } else {
                    rotate(n - 1, cw);
                }
                if (gear[n - 1][2] != gear[n][6]) {
                    rotate(n, -cw);
                }
                break;

            case 4:         // ë„¤ ë²ˆì§¸ í†±ë‹ˆë°”í€´ì¼ ê²½ìš°
                if (gear[n - 1][6] != gear[n - 2][2]) {
                    if (gear[n - 2][6] != gear[n - 3][2]) {
                        if (gear[n - 3][6] != gear[n - 4][2]) {
                            rotate(n - 4, -cw);
                            rotate(n - 3, cw);
                            rotate(n - 2, -cw);
                            rotate(n - 1, cw);
                        } else {
                            rotate(n - 3, cw);
                            rotate(n - 2, -cw);
                            rotate(n - 1, cw);
                        }
                    } else {
                        rotate(n - 2, -cw);
                        rotate(n - 1, cw);
                    }
                } else {
                    rotate(n - 1, cw);
                }
                break;
        }
    }

    // í†±ë‹ˆë°”í€´ì˜ ì ìˆ˜ì˜ í•©ì„ ì¶œë ¥
    for (int i = 0; i < 4; i++)
        if (gear[i][0] == 1)
            sum += pow(2, i);

    cout << sum;
}

void rotate(int n, int cw) {
    if (cw == 1) {                          // ì‹œê³„ë°©í–¥ìœ¼ë¡œ íšŒì „
        int tmp = gear[n][7];
        for (int i = 7; i > 0; i--) {
            gear[n][i] = gear[n][i - 1];
        }
        gear[n][0] = tmp;
    } else {                                // ë°˜ì‹œê³„ë°©í–¥ìœ¼ë¡œ íšŒì „
        int tmp = gear[n][0];
        for (int i = 0; i < 7; i++) {
            gear[n][i] = gear[n][i + 1];
        }
        gear[n][7] = tmp;
    }
}
~~~

## REVIEW
- ë°˜ë¡€ë¥¼ ëª¨ë¥´ê² ë‹¤....ğŸ˜¥